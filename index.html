<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toulon â€” Clock & Weather</title>
  <style>
    :root {
      --glass: rgba(20, 28, 48, 0.45);
      --glass-strong: rgba(20, 28, 48, 0.60);
      --border: rgba(255, 255, 255, 0.12);
      --text: #f5f7ff;
      --muted: #cdd3ea;
      --accent: #74d3ff;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.25);
      --card-radius: 18px;
      --card-gap: 18px;
      --blur: blur(16px);
      --glow: 0 0 30px rgba(116, 211, 255, 0.2);
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(circle at 20% 10%, #1b2a4a 0%, #0c1326 45%, #070b18 100%);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Subtle galaxy background */
    .galaxy {
      position: fixed;
      inset: 0;
      z-index: -2;
      background:
        radial-gradient(800px 400px at 80% 20%, rgba(79, 98, 255, 0.25), transparent 70%),
        radial-gradient(600px 300px at 20% 80%, rgba(255, 120, 180, 0.18), transparent 65%),
        radial-gradient(400px 200px at 50% 40%, rgba(115, 220, 255, 0.14), transparent 70%);
    }

    canvas#stars {
      position: fixed;
      inset: 0;
      z-index: -1;
      opacity: 0.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 28px;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 18px;
    }

    .title {
      font-size: 1.4rem;
      font-weight: 600;
      letter-spacing: 0.4px;
    }

    .last-updated {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .layout {
      display: grid;
      grid-template-columns: 0.9fr 1.1fr;
      gap: 24px;
      align-items: start;
    }

    .card {
      background: var(--glass);
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      box-shadow: var(--shadow);
      backdrop-filter: var(--blur);
      -webkit-backdrop-filter: var(--blur);
      padding: 18px 20px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 34px rgba(0, 0, 0, 0.32);
    }

    .left-col .card + .card {
      margin-top: var(--card-gap);
    }

    .clock-wrap {
      display: grid;
      place-items: center;
    }

    .analog {
      width: 240px;
      height: 240px;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 45%, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      border: 1px solid rgba(255,255,255,0.2);
      position: relative;
      box-shadow: var(--glow);
    }

    .tick {
      position: absolute;
      width: 2px;
      height: 10px;
      background: rgba(255,255,255,0.5);
      top: 6px;
      left: 50%;
      transform-origin: 50% 114px;
    }

    .tick.major {
      height: 16px;
      background: rgba(255,255,255,0.9);
    }

    .hand {
      position: absolute;
      left: 50%;
      top: 50%;
      transform-origin: 0% 50%;
      transform: rotate(90deg);
      border-radius: 6px;
    }

    .hand.hour {
      width: 70px;
      height: 6px;
      background: linear-gradient(90deg, #fff, #74d3ff);
    }
    .hand.minute {
      width: 95px;
      height: 4px;
      background: linear-gradient(90deg, #fff, #9be2ff);
    }
    .hand.second {
      width: 105px;
      height: 2px;
      background: #ff7abf;
      box-shadow: 0 0 10px rgba(255, 122, 191, 0.6);
    }

    .center-dot {
      position: absolute;
      width: 10px;
      height: 10px;
      background: #fff;
      border-radius: 50%;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      box-shadow: 0 0 10px rgba(255,255,255,0.5);
    }

    .digital {
      text-align: center;
    }

    .digital-time {
      font-size: 2.6rem;
      font-weight: 700;
      letter-spacing: 2px;
    }

    .digital-time .seconds {
      font-size: 1.4rem;
      color: var(--muted);
    }

    .blink {
      display: inline-block;
      animation: blink 1s infinite ease-in-out;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0.2; }
    }

    .digital-date {
      margin-top: 6px;
      color: var(--muted);
      font-size: 1rem;
    }

    .sun-moon {
      display: grid;
      gap: 10px;
    }

    .sun-moon-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.95rem;
    }

    .moon-icon {
      font-size: 1.2rem;
      margin-right: 6px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: var(--card-gap);
    }

    .weather-card {
      display: grid;
      gap: 8px;
    }

    .weather-title {
      font-size: 0.95rem;
      color: var(--muted);
    }

    .weather-value {
      font-size: 1.6rem;
      font-weight: 600;
    }

    .condition-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .condition-text {
      font-weight: 600;
    }

    .sparkline {
      width: 100%;
      height: 80px;
    }

    .sparkline path,
    .sparkline polyline {
      fill: none;
      stroke-width: 2;
    }

    .sparkline .temp {
      stroke: #74d3ff;
    }

    .sparkline .precip {
      stroke: #7bdcff;
      stroke-dasharray: 2 3;
      opacity: 0.6;
    }

    .footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 18px;
      color: var(--muted);
      font-size: 0.85rem;
    }

    .signature {
      opacity: 0.7;
    }

    .refresh-btn {
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.2);
      color: var(--text);
      padding: 6px 12px;
      border-radius: 10px;
      cursor: pointer;
      transition: background 0.2s ease;
      font-size: 0.85rem;
    }

    .refresh-btn:hover {
      background: rgba(255,255,255,0.2);
    }

    .data-unavailable {
      color: #ffb2c2;
      font-size: 0.9rem;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }
      .grid {
        grid-template-columns: 1fr;
      }
      .analog {
        width: 210px;
        height: 210px;
      }
    }
  </style>
</head>
<body>
  <div class="galaxy"></div>
  <canvas id="stars"></canvas>

  <div class="container">
    <div class="header">
      <div class="title">Toulon, France</div>
      <div class="last-updated">Last updated at <span id="lastUpdated">--:--</span></div>
    </div>

    <div class="layout">
      <!-- LEFT COLUMN -->
      <div class="left-col">
        <div class="card clock-wrap">
          <div class="analog" id="analogClock">
            <!-- clock ticks -->
          </div>
          <div class="digital">
            <div class="digital-time">
              <span id="hh">00</span><span class="blink">:</span><span id="mm">00</span>
              <span class="seconds">:<span id="ss">00</span></span>
            </div>
            <div class="digital-date" id="dateString">--</div>
          </div>
        </div>

        <div class="card sun-moon">
          <div class="sun-moon-row">
            <div>Sunrise</div>
            <div id="sunrise">--:--</div>
          </div>
          <div class="sun-moon-row">
            <div>Sunset</div>
            <div id="sunset">--:--</div>
          </div>
          <div class="sun-moon-row">
            <div><span class="moon-icon">ðŸŒ™</span>Moon phase</div>
            <div id="moonPhase">--</div>
          </div>
        </div>
      </div>

      <!-- RIGHT COLUMN -->
      <div>
        <div class="grid">
          <div class="card weather-card">
            <div class="weather-title">Conditions</div>
            <div class="condition-row">
              <div id="conditionIcon"></div>
              <div class="condition-text" id="conditionText">--</div>
            </div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Temperature</div>
            <div class="weather-value" id="temp">--Â°C</div>
            <div class="weather-title">Feels like <span id="feels">--Â°C</span></div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Humidity</div>
            <div class="weather-value" id="humidity">--%</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Pressure</div>
            <div class="weather-value" id="pressure">-- hPa</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Wind</div>
            <div class="weather-value" id="wind">-- km/h</div>
            <div class="weather-title">Gusts <span id="gusts">-- km/h</span></div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">UV index</div>
            <div class="weather-value" id="uv">--</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Visibility</div>
            <div class="weather-value" id="visibility">-- km</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Cloud cover</div>
            <div class="weather-value" id="clouds">--%</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Precipitation probability</div>
            <div class="weather-value" id="precipProb">--%</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Rain rate</div>
            <div class="weather-value" id="rainRate">-- mm/h</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">Air quality</div>
            <div class="weather-value" id="airQuality">Not available</div>
          </div>

          <div class="card weather-card">
            <div class="weather-title">24h outlook</div>
            <svg class="sparkline" viewBox="0 0 300 80">
              <polyline id="tempLine" class="temp" points=""></polyline>
              <polyline id="precipLine" class="precip" points=""></polyline>
            </svg>
            <div class="weather-title">Mini temp curve + precip probability</div>
          </div>
        </div>

        <div class="card" id="statusCard" style="margin-top: var(--card-gap); display:none;">
          <div class="data-unavailable">Data unavailable</div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="signature">B. Geeverding</div>
      <button class="refresh-btn" id="refreshBtn">Refresh</button>
    </div>
  </div>

  <script>
    // ==========================
    // CONFIG
    // ==========================
    const CITY = "Toulon";
    const LAT = 43.1242;
    const LON = 5.9280;
    const TZ = "Europe/Paris";
    const REFRESH_MS = 10 * 60 * 1000;

    const state = {
      weather: null,
      air: null
    };

    // ==========================
    // UTILITIES
    // ==========================
    const $ = (id) => document.getElementById(id);

    function formatTime(date) {
      return date.toLocaleTimeString("en-GB", { hour: "2-digit", minute: "2-digit", second: "2-digit", hour12: false });
    }

    function formatTimeHM(date) {
      return date.toLocaleTimeString("en-GB", { hour: "2-digit", minute: "2-digit", hour12: false });
    }

    function formatDateLong(date) {
      return date.toLocaleDateString("en-GB", {
        weekday: "long", year: "numeric", month: "long", day: "2-digit"
      });
    }

    function fetchWithTimeout(url, timeout = 8000) {
      return new Promise((resolve, reject) => {
        const controller = new AbortController();
        const timer = setTimeout(() => controller.abort(), timeout);
        fetch(url, { signal: controller.signal })
          .then((res) => {
            clearTimeout(timer);
            if (!res.ok) throw new Error("HTTP " + res.status);
            return res.json();
          })
          .then(resolve)
          .catch(reject);
      });
    }

    async function fetchWithRetry(url, retries = 1) {
      try {
        return await fetchWithTimeout(url);
      } catch (e) {
        if (retries > 0) {
          await new Promise(r => setTimeout(r, 800));
          return fetchWithRetry(url, retries - 1);
        }
        throw e;
      }
    }

    function setDataUnavailable(show) {
      $("statusCard").style.display = show ? "block" : "none";
    }

    function weatherLabel(code) {
      const map = {
        0: "Clear",
        1: "Mainly clear",
        2: "Partly cloudy",
        3: "Overcast",
        45: "Fog",
        48: "Depositing rime fog",
        51: "Light drizzle",
        53: "Drizzle",
        55: "Dense drizzle",
        61: "Light rain",
        63: "Rain",
        65: "Heavy rain",
        66: "Freezing rain",
        67: "Heavy freezing rain",
        71: "Light snow",
        73: "Snow",
        75: "Heavy snow",
        77: "Snow grains",
        80: "Rain showers",
        81: "Heavy showers",
        82: "Violent showers",
        85: "Snow showers",
        86: "Heavy snow showers",
        95: "Thunderstorm",
        96: "Thunderstorm with hail",
        99: "Thunderstorm with heavy hail"
      };
      return map[code] || "Unknown";
    }

    function weatherIcon(code) {
      const icon = (svg) => svg;
      // Colors: sun yellow, rain blue, clouds light gray, wind cyan, thunder violet, snow pale blue, fog gray
      if ([0,1].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <circle cx="32" cy="32" r="12" fill="#FFD45A"/>
          <g stroke="#FFD45A" stroke-width="3">
            <line x1="32" y1="6" x2="32" y2="16"/>
            <line x1="32" y1="48" x2="32" y2="58"/>
            <line x1="6" y1="32" x2="16" y2="32"/>
            <line x1="48" y1="32" x2="58" y2="32"/>
            <line x1="14" y1="14" x2="21" y2="21"/>
            <line x1="43" y1="43" x2="50" y2="50"/>
            <line x1="14" y1="50" x2="21" y2="43"/>
            <line x1="43" y1="21" x2="50" y2="14"/>
          </g>
        </svg>`);
      }
      if ([2].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <circle cx="24" cy="24" r="10" fill="#FFD45A"/>
          <path d="M18 44h28a10 10 0 0 0 0-20 13 13 0 0 0-25-2A10 10 0 0 0 18 44z" fill="#D7DCE6"/>
        </svg>`);
      }
      if ([3].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <path d="M14 42h36a12 12 0 0 0 0-24 18 18 0 0 0-35-2A12 12 0 0 0 14 42z" fill="#D7DCE6"/>
        </svg>`);
      }
      if ([45,48].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <path d="M12 30h40" stroke="#B7BDC9" stroke-width="4"/>
          <path d="M8 40h48" stroke="#B7BDC9" stroke-width="4"/>
          <path d="M16 50h32" stroke="#B7BDC9" stroke-width="4"/>
        </svg>`);
      }
      if ([51,53,55,61,63,65,80,81,82].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <path d="M16 32h32a10 10 0 0 0 0-20 14 14 0 0 0-27-2A10 10 0 0 0 16 32z" fill="#D7DCE6"/>
          <g stroke="#5BB6FF" stroke-width="3">
            <line x1="22" y1="38" x2="18" y2="46"/>
            <line x1="34" y1="38" x2="30" y2="46"/>
            <line x1="46" y1="38" x2="42" y2="46"/>
          </g>
        </svg>`);
      }
      if ([71,73,75,77,85,86].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <path d="M16 32h32a10 10 0 0 0 0-20 14 14 0 0 0-27-2A10 10 0 0 0 16 32z" fill="#D7DCE6"/>
          <g fill="#DFF4FF">
            <circle cx="22" cy="42" r="2"/>
            <circle cx="34" cy="44" r="2"/>
            <circle cx="46" cy="42" r="2"/>
          </g>
        </svg>`);
      }
      if ([95,96,99].includes(code)) {
        return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
          <path d="M16 30h32a10 10 0 0 0 0-20 14 14 0 0 0-27-2A10 10 0 0 0 16 30z" fill="#D7DCE6"/>
          <polygon points="30,34 38,34 32,48 40,48 26,62 30,48 22,48" fill="#9C7BFF"/>
        </svg>`);
      }
      return icon(`<svg width="40" height="40" viewBox="0 0 64 64">
        <circle cx="32" cy="32" r="12" fill="#9BE2FF"/>
        <text x="32" y="38" text-anchor="middle" font-size="18" fill="#0c1326">?</text>
      </svg>`);
    }

    function moonPhaseName(date) {
      // Simple moon phase calculation
      const lp = 2551443; // lunar period in seconds
      const newMoon = new Date("2001-01-24T13:35:00Z").getTime() / 1000;
      const now = date.getTime() / 1000;
      const phase = ((now - newMoon) % lp) / lp;
      if (phase < 0.03 || phase > 0.97) return "New Moon";
      if (phase < 0.22) return "Waxing Crescent";
      if (phase < 0.28) return "First Quarter";
      if (phase < 0.47) return "Waxing Gibbous";
      if (phase < 0.53) return "Full Moon";
      if (phase < 0.72) return "Waning Gibbous";
      if (phase < 0.78) return "Last Quarter";
      return "Waning Crescent";
    }

    // ==========================
    // CLOCK
    // ==========================
    function buildTicks() {
      const clock = $("analogClock");
      for (let i = 0; i < 60; i++) {
        const t = document.createElement("div");
        t.className = "tick" + (i % 5 === 0 ? " major" : "");
        t.style.transform = `rotate(${i * 6}deg) translateX(-50%)`;
        clock.appendChild(t);
      }
      const hour = document.createElement("div");
      hour.className = "hand hour";
      const minute = document.createElement("div");
      minute.className = "hand minute";
      const second = document.createElement("div");
      second.className = "hand second";
      const dot = document.createElement("div");
      dot.className = "center-dot";
      clock.appendChild(hour);
      clock.appendChild(minute);
      clock.appendChild(second);
      clock.appendChild(dot);
    }

    function updateClock() {
      const now = new Date();
      const hh = now.getHours();
      const mm = now.getMinutes();
      const ss = now.getSeconds();

      $("hh").textContent = String(hh).padStart(2, "0");
      $("mm").textContent = String(mm).padStart(2, "0");
      $("ss").textContent = String(ss).padStart(2, "0");
      $("dateString").textContent = formatDateLong(now);
      $("moonPhase").textContent = moonPhaseName(now);

      const hourDeg = (hh % 12) * 30 + mm * 0.5;
      const minDeg = mm * 6 + ss * 0.1;
      const secDeg = ss * 6;

      const hands = document.querySelectorAll(".hand");
      hands[0].style.transform = `rotate(${hourDeg - 90}deg)`;
      hands[1].style.transform = `rotate(${minDeg - 90}deg)`;
      hands[2].style.transform = `rotate(${secDeg - 90}deg)`;
    }

    // ==========================
    // WEATHER
    // ==========================
    async function loadWeather() {
      const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}` +
        `&current=temperature_2m,apparent_temperature,relative_humidity_2m,pressure_msl,wind_speed_10m,wind_gusts_10m,cloud_cover,visibility,precipitation,precipitation_probability,weather_code,uv_index,is_day,rain` +
        `&hourly=temperature_2m,precipitation_probability,precipitation` +
        `&daily=sunrise,sunset` +
        `&timezone=${encodeURIComponent(TZ)}`;

      try {
        const data = await fetchWithRetry(url, 1);
        state.weather = data;
        renderWeather(data);
        setDataUnavailable(false);
        $("lastUpdated").textContent = formatTimeHM(new Date());
      } catch (e) {
        // Keep last known values if any
        if (!state.weather) setDataUnavailable(true);
      }
    }

    async function loadAirQuality() {
      const url = `https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${LAT}&longitude=${LON}&current=us_aqi&timezone=${encodeURIComponent(TZ)}`;
      try {
        const data = await fetchWithRetry(url, 1);
        state.air = data;
        renderAirQuality(data);
      } catch (e) {
        if (!state.air) {
          $("airQuality").textContent = "Not available";
        }
      }
    }

    function renderAirQuality(data) {
      const aqi = data?.current?.us_aqi;
      if (aqi == null) {
        $("airQuality").textContent = "Not available";
        return;
      }
      $("airQuality").textContent = `${aqi} AQI`;
    }

    function renderWeather(data) {
      const c = data.current;
      if (!c) return;

      $("temp").textContent = `${Math.round(c.temperature_2m)}Â°C`;
      $("feels").textContent = `${Math.round(c.apparent_temperature)}Â°C`;
      $("humidity").textContent = `${Math.round(c.relative_humidity_2m)}%`;
      $("pressure").textContent = `${Math.round(c.pressure_msl)} hPa`;
      $("wind").textContent = `${Math.round(c.wind_speed_10m)} km/h`;
      $("gusts").textContent = `${Math.round(c.wind_gusts_10m)} km/h`;
      $("uv").textContent = `${Math.round(c.uv_index)}`;
      $("visibility").textContent = `${(c.visibility / 1000).toFixed(1)} km`;
      $("clouds").textContent = `${Math.round(c.cloud_cover)}%`;
      $("precipProb").textContent = `${Math.round(c.precipitation_probability)}%`;

      const rainRate = c.rain != null ? c.rain : c.precipitation;
      $("rainRate").textContent = `${rainRate.toFixed(1)} mm/h`;

      $("conditionText").textContent = weatherLabel(c.weather_code);
      $("conditionIcon").innerHTML = weatherIcon(c.weather_code);

      const sunrise = data.daily?.sunrise?.[0];
      const sunset = data.daily?.sunset?.[0];
      $("sunrise").textContent = sunrise ? formatTimeHM(new Date(sunrise)) : "--:--";
      $("sunset").textContent = sunset ? formatTimeHM(new Date(sunset)) : "--:--";

      renderSparkline(data);
    }

    function renderSparkline(data) {
      const temps = data.hourly?.temperature_2m?.slice(0, 24) || [];
      const probs = data.hourly?.precipitation_probability?.slice(0, 24) || [];
      if (!temps.length) return;

      const tempMin = Math.min(...temps);
      const tempMax = Math.max(...temps);
      const width = 300;
      const height = 80;

      const tempPoints = temps.map((t, i) => {
        const x = (i / (temps.length - 1)) * width;
        const y = height - ((t - tempMin) / (tempMax - tempMin || 1)) * (height - 10) - 5;
        return `${x},${y}`;
      }).join(" ");

      const probPoints = probs.map((p, i) => {
        const x = (i / (probs.length - 1)) * width;
        const y = height - (p / 100) * (height - 10) - 5;
        return `${x},${y}`;
      }).join(" ");

      $("tempLine").setAttribute("points", tempPoints);
      $("precipLine").setAttribute("points", probPoints);
    }

    // ==========================
    // STARS CANVAS (SUBTLE)
    // ==========================
    function initStars() {
      const canvas = $("stars");
      const ctx = canvas.getContext("2d");
      let w, h;
      const stars = Array.from({ length: 80 }, () => ({
        x: Math.random(),
        y: Math.random(),
        r: Math.random() * 1.2 + 0.2,
        alpha: Math.random() * 0.6 + 0.2,
        drift: (Math.random() - 0.5) * 0.0002
      }));

      function resize() {
        w = canvas.width = window.innerWidth;
        h = canvas.height = window.innerHeight;
      }
      window.addEventListener("resize", resize);
      resize();

      function draw() {
        ctx.clearRect(0, 0, w, h);
        for (const s of stars) {
          s.y += s.drift;
          if (s.y < 0) s.y = 1;
          if (s.y > 1) s.y = 0;
          ctx.beginPath();
          ctx.fillStyle = `rgba(255,255,255,${s.alpha})`;
          ctx.arc(s.x * w, s.y * h, s.r, 0, Math.PI * 2);
          ctx.fill();
        }
        requestAnimationFrame(draw);
      }
      draw();
    }

    // ==========================
    // INIT
    // ==========================
    function init() {
      document.querySelector(".title").textContent = `${CITY}, France`;
      buildTicks();
      updateClock();
      setInterval(updateClock, 1000);

      loadWeather();
      loadAirQuality();
      setInterval(loadWeather, REFRESH_MS);
      setInterval(loadAirQuality, REFRESH_MS);

      $("refreshBtn").addEventListener("click", () => {
        loadWeather();
        loadAirQuality();
      });

      initStars();
    }

    init();
  </script>
</body>
</html>
